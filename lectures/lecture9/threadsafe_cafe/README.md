# Симулятор кав'ярні з синхронізацією потоків

Демонстраційна програма використання потоків (threads) для побудови інтерфейсу
користувача зі швидким реагуванням та одночасного виконання різних запитів.

Програма складається з трьох груп потоків:

 1. основний - очікує від користувача вводу замовлень на приготування гарячих
   напоїв або команди на закінчення роботи програми;
 2. касир (2 потоки) - першим обслуговують чергу замовлень, витрачаючи 5 секунд на кожне;
 3. бариста (2 потоки) - готують напої за чергою замовлень витрачаючи різний час на кожне
   кожне замовлення в залежності від напою.
   
Всі потоки працюють незалежно і не блокують один одного.

Програма дозволяє створювати ситуації коли біля касира та/чи бариста створюється
черга замовлень при цьому інтерфейс користувача залишається активним і дозволяє
додавати ще більше замовлень.

Для передачі замовлень між потоками використовуються черги у вигляді циклічного
буфера.

В програмі визначено дві черги:

 1. Черга касира. Основний потік додає замовлення. Потоки касирів обробляють
    замовлення.
 2. Черга баристи. Потоки касирів додають замовлення. Потоки баристи обробляють
    замовлення.

Для синхронізації доступу до кожної з черг використовуються:

1. М'ютекс для визначення критичної секції і унеможливлювання ситуації коли два або
   більше потоків одночасно додають або отримують замовлення з черги.
2. Умовна змінна для оповіщення потоків що в черзі з'явились замовлення або
   про те що черга закрита (кінець робочого дня).

Недоліки поточної реалізації:

  1. Обидві черги мають фіксований максимальний розмір в 100 замовлень при
     досягнення якого програма "падає" з помилкою.

Додаткові посилання:

 * [Циклічний буфер](https://uk.wikipedia.org/wiki/%D0%A6%D0%B8%D0%BA%D0%BB%D1%96%D1%87%D0%BD%D0%B8%D0%B9_%D0%B1%D1%83%D1%84%D0%B5%D1%80)
